<div class="container" infinite-scroll="getMoreGuilds()">
    <h1>Guilds</h1>
    <div class="form-group">
        <label class="radio-inline">
            <input type="radio" ng-model="filters.faction" value="" ng-change="updateFilters()" > All
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.faction" value="0" ng-change="updateFilters()" > <span class="icon-small faction-0">{{"ALLIANCE"|translate}}</span>
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.faction" value="1" ng-change="updateFilters()" > <span class="icon-small faction-1">{{"HORDE"|translate}}</span>
        </label>
    </div>
    <div class="form-group">
        <label>Region:</label>
        <select ng-model="filters.region" ng-change="updateFilters()" class="form-control">
            <option value=""></option>
            <option value="eu">EU</option>
            <option value="kr">KR</option>
            <option value="tw">TW</option>
            <option value="us">US</option>
        </select>
    </div>
    <div class="form-group">
        <label>Language :</label>
        <select ng-model="filters.language"  ng-change="updateFilters()"  class="form-control">
            <option ng-repeat="language in languages" value="{{language}}">{{"LANG_"+language|uppercase|translate}}</option>
        </select>
    </div>
    <div class="form-group">
        <label class="checkbox-inline" ng-repeat="(class_number,value) in filters.classes">
            <input type="checkbox" ng-model="filters.classes[class_number]" ng-change="updateFilters()" > <span class="icon-small class-{{class_number}}">{{"CLASS_"+class_number|translate}}</span>
        </label>
    </div>
    <div class="form-group">
        <label class="radio-inline">
            <input type="radio" ng-model="filters.role" value="" ng-change="updateFilters()" > All
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.role" value="tanks" ng-change="updateFilters()" > <span class="icon-small tank">{{"TANK"|translate}}</span>
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.role" value="heals" ng-change="updateFilters()" > <span class="icon-small healer">{{"HEALER"|translate}}</span>
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.role" value="melee_dps" ng-change="updateFilters()" > <span class="icon-small dps">{{"MELEE_DPS"|translate}}</span>
        </label>
        <label class="radio-inline">
            <input type="radio" ng-model="filters.role" value="ranged_dps" ng-change="updateFilters()" > <span class="icon-small dps">{{"RANGED_DPS"|translate}}</span>
        </label>
    </div>
    <div class="form-group">
        <label>
            <input ng-model="filters.raids_per_week.active" ng-change="updateFilters()" type="checkbox"> Raids per week</label>
        <div ng-if="filters.raids_per_week.active">
            {{filters.raids_per_week.min}} - {{filters.raids_per_week.max}}
            <angular-ranger min="1" max="7" step="1" min-value="filters.raids_per_week.min" max-value="filters.raids_per_week.max"></angular-ranger>
        </div>
    </div>
    <table class="table table-condensed" >
        <thead>
        <tr>
            <th>Name</th>
            <th>Realm</th>
            <th>Region</th>
            <th>Language</th>
            <th>Raids per week</th>
            <th>Last update</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="guild in guilds">
            <td>
                <a class="guild faction-{{guild.bnet.side}}" href="#/guild/{{ guild.region }}/{{ guild.realm }}/{{ guild.name }}/">
                    {{guild.name}}
                </a>
            </td>
            <td>
                {{guild.realm}}
            </td>
            <td>
                {{guild.region}}
            </td>
            <td>
                {{guild.ad.language}}
            </td>
            <td>
                {{guild.ad.raids_per_week.min}} - {{guild.ad.raids_per_week.max}}
            </td>
            <td>
                <span am-time-ago="guild.ad.updated"></span>
            </td>

        </tr>

        </tbody>
    </table>
    <div class="row text-center">
        <i class="fa fa-3x fa-spinner fa-spin" ng-if="loading"></i>
    </div>
</div>